{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "build:vite": {
      "cache": true,
      "inputs": ["src/**/*", "types/**", "vite.config.ts"],
      "outputs": ["out/static/**"]
    },

    "fetch:sanity": {
      "cache": false,
      "env": ["SANITY_PROJECT_ID"],
      "inputs": ["fetch-sanity.ts", "types/sanity.ts"],
      "outputs": ["content.json"]
    },

    "build": {
      "cache": false,
      "dependsOn": ["fetch:sanity", "build:vite"],
      "inputs": [
        "server/**",
        "content.json",
        "out/static/.vite/manifest.json",
        "src/views/**",
        "types/**",
        "build.ts"
      ],
      "outputs": ["out/_worker.js"]
    }
  }
}
