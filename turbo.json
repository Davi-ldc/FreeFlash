{
	"$schema": "https://turbo.build/schema.json",
	"remoteCache": {
		"enabled": true
	},
	"tasks": {
		"app#build": {
			"cache": true,
			"dependsOn": ["app#build:vite", "app#build:apis", "app#fetch:cms"],
			"inputs": ["server/**", "out/static/.vite/manifest.json", "src/views/**", "build.ts", "content.json"],
			"outputs": ["out/_worker.js"]
		},
		"app#build:vite": {
			"cache": true,
			"inputs": ["src/**/*", "vite.config.ts"]
		},
		"app#build:apis": {
			"cache": true,
			"inputs": ["server/api/**"],
			"env": ["GITHUB_REPO", "GITHUB_TOKEN"],
			"outputs": ["out/api/**"]
		},
		"app#fetch:cms": {
			"cache": false,
			"env": ["SANITY_PROJECT_ID"],
			"inputs": ["fetch-cms.ts"],
			"outputs": ["content.json"]
		},
		"app#deploy": {
			"cache": true,
			"dependsOn": ["app#build", "app#deploy:api:exemple", "app#deploy:api:webhook"],
			"env": ["CLOUDFLARE_ACCOUNT_ID", "CLOUDFLARE_API_TOKEN"],
			"inputs": ["out/_worker.js"]
		},
		"app#deploy:api:exemple": {
			"cache": true,
			"dependsOn": ["app#build:apis"],
			"env": ["CLOUDFLARE_ACCOUNT_ID", "CLOUDFLARE_API_TOKEN"],
			"inputs": ["server/api/exemple.ts"]
		},
		"app#deploy:api:webhook": {
			"cache": true,
			"dependsOn": ["app#build:apis"],
			"env": ["CLOUDFLARE_ACCOUNT_ID", "CLOUDFLARE_API_TOKEN"],
			"inputs": ["server/api/webhook.ts"]
		}
	}
}
