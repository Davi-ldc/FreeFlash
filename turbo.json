{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {

    "build:vite": {
      "cache": true,
      "inputs": ["src/**/*", "types/**", "vite.config.ts"],
      "outputs": [
        ".vercel/output/static/**" 
      ]
    },

    "fetch:sanity": {
      "cache": false,
      "env": ["SANITY_PROJECT_ID"],
      "inputs": ["fetch-sanity.ts", "types/sanity.ts"],
      "outputs": ["content.json"]
    },

    "precompileTemplates": {
      "cache": true,
      "inputs": ["src/pages/**/*", "src/partials/**/*", "precompile-templates.ts"],
      "outputs": ["server/precompiled-templates.js"]
    },

    "build": {
      "cache": false,
      "dependsOn": ["fetch:sanity", "build:vite", "precompileTemplates"],
      "inputs": ["server/config/**/*","server/app.ts","server/index.ts", "server/precompiled-templates.js", "content.json", ".vercel/output/static/.vite/manifest.json", "types/sanity.ts", "types/pages.ts"],
      "outputs": [
        ".vercel/output/functions/**"
      ]
    }
  }
}