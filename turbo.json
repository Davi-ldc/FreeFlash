{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "app#build:vite": {
      "cache": true,
      "inputs": ["app/src/**/*", "app/types/**", "app/vite.config.ts"],
      "outputs": ["app/out/static/**"]
    },

    "app#fetch:sanity": {
      "cache": false,
      "env": ["SANITY_PROJECT_ID"],
      "inputs": ["app/fetch-sanity.ts", "app/types/sanity.ts"],
      "outputs": ["app/content.json"]
    },

    "app#build": {
      "cache": false,
      "dependsOn": ["app#fetch:sanity", "app#build:vite"],
      "inputs": [
        "app/server/**",
        "app/content.json",
        "app/out/static/.vite/manifest.json",
        "app/src/views/**",
        "app/types/**",
        "app/build.ts"
      ],
      "outputs": ["app/out/_worker.js"]
    }
  }
}
